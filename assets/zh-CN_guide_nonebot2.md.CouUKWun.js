import{_ as s,c as i,o as a,a2 as t}from"./chunks/framework.DukRYrIy.js";const b=JSON.parse('{"title":"windows下使用LLOneBot链接nonebot2(以下简称nb2)","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/guide/nonebot2.md","filePath":"zh-CN/guide/nonebot2.md","lastUpdated":1710854816000}'),e={name:"zh-CN/guide/nonebot2.md"},n=t(`<h1 id="windows下使用llonebot链接nonebot2-以下简称nb2" tabindex="-1">windows下使用LLOneBot链接nonebot2(以下简称nb2) <a class="header-anchor" href="#windows下使用llonebot链接nonebot2-以下简称nb2" aria-label="Permalink to &quot;windows下使用LLOneBot链接nonebot2(以下简称nb2)&quot;">​</a></h1><h2 id="_1-环境" tabindex="-1">1.环境 <a class="header-anchor" href="#_1-环境" aria-label="Permalink to &quot;1.环境&quot;">​</a></h2><p>​ <strong>Python 版本 &gt;= 3.8</strong>→<a href="https://www.python.org/" target="_blank" rel="noreferrer">python官网</a>,如果有小白打不开或者找不到下载位置,这里提供一个<a href="https://syykln.lanzoul.com/iZegc1rwtm1i" target="_blank" rel="noreferrer">python3.9.10</a></p><p>​ 测试windows环境是win10,win11应该也一样。低版本windows未测试</p><h2 id="_2-安装python-已经有python环境的跳过" tabindex="-1">2.安装python（已经有python环境的跳过） <a class="header-anchor" href="#_2-安装python-已经有python环境的跳过" aria-label="Permalink to &quot;2.安装python（已经有python环境的跳过）&quot;">​</a></h2><p>​ 打开安装包需要注意的就是安装位置,以及勾选这里的加入环境变量</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image-20240319194931333.9rj5obfdtg.png" alt="image-20240319194931333"></p><p>​ 安装完成之后win+R输入cmd打开命令行窗口。分别输入这两行代码配置pip源</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip config </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pypi.tuna.tsinghua.edu.cn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">simple</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip config </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> install.trusted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host pypi.tuna.tsinghua.edu.cn</span></span></code></pre></div><p>​ 在升级一下pip</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>pip install --upgrade pip</span></span></code></pre></div><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.6pn9n3gf0s.png" alt="image"></p><h2 id="_3-安装nb" tabindex="-1">3.安装nb <a class="header-anchor" href="#_3-安装nb" aria-label="Permalink to &quot;3.安装nb&quot;">​</a></h2><p>​</p><p>安装 <a href="https://pypa.github.io/pipx/" target="_blank" rel="noreferrer">pipx</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pipx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pipx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ensurepath</span></span></code></pre></div><p>​ 如果在此步骤的输出中出现了“open a new terminal”或者“re-login”字样，那么请关闭当前终端并重新打开一个新的终端。</p><p>安装脚手架</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nb-cli</span></span></code></pre></div><p>​ 安装完成后，你可以在命令行使用 <code>nb</code> 命令来使用脚手架。如果出现无法找到命令的情况（例如出现“Command not found”字样),重启一下命令行窗口。如果还是不行就请参考 <a href="https://pypa.github.io/pipx/" target="_blank" rel="noreferrer">pipx 文档</a> 检查你的环境变量</p><p>​ 在任意一个文件夹位置那里输入cmd回车打开命令行窗口.</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.7i054uayov.png" alt="image"></p><p>​ 输入代码</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>nb create</span></span></code></pre></div><p>​ 默认选择一个要使用的模板: bootstrap (初学者或用户)。回车</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.2oba8ptccw.png" alt="image"></p><p>​ 项目名称随意填写,这里使用 llonebot_nb 然后回车。这里空格直接选择第一个，变绿之后直接回车。</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.8ad0mkyfkp.png" alt="image"></p><p>​ 驱动选择fastapi</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.1e8d2ehf0w.png" alt="image"></p><p>​ 立即安装依赖选择Y。创建虚拟环境选择Y。然后等待安装</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.3uulhbqcsc.png" alt="image"></p><p>​ 提示要使用哪些内置插件? 直接回车。然后cd 进入刚刚的项目文件夹</p><p>​ <img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.101xbjgb09.png" alt="image"></p><p>​ 执行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>nb run</span></span></code></pre></div><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.969i21it0q.png" alt="image"></p><p>​ 出现这样的界面就说明成功了。</p><p>​ 如果要修改端口或者host地址。在<strong>项目文件夹</strong>中创建一个 <code>.env</code> 文本文件，并写入以下内容:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HOST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 配置 NoneBot 监听的 IP / 主机名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 配置 NoneBot 监听的端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COMMAND_START</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[&quot;/&quot;]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 配置命令起始字符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COMMAND_SEP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[&quot;.&quot;]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 配置命令分割字符</span></span></code></pre></div><p>​ 更多的配置项在这里<a href="https://nonebot.dev/docs/appendices/config#%E5%86%85%E7%BD%AE%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noreferrer">配置 | NoneBot</a></p><p>​ 至此nb安装完成,你可以去<a href="https://v2.nonebot.dev/store" target="_blank" rel="noreferrer">nb插件商店</a>按照提示安装你想要的插件</p><h2 id="_4-安装llonebot" tabindex="-1">4.安装llonebot <a class="header-anchor" href="#_4-安装llonebot" aria-label="Permalink to &quot;4.安装llonebot&quot;">​</a></h2><p>​ <a href="https://llonebot.github.io/zh-CN/guide/getting-started" target="_blank" rel="noreferrer">这里已经有详细教程</a></p><h2 id="_5-连接nb2" tabindex="-1">5.连接nb2 <a class="header-anchor" href="#_5-连接nb2" aria-label="Permalink to &quot;5.连接nb2&quot;">​</a></h2><p>​ 打开NTQQ的设置界面。找到llonebot。启用反向websocket服务。填入。(如果你自己修改了端口就自行修改地址默认是127.0.0.1:8080)。然后保存</p><p>​</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ws://127.0.0.1:8080/onebot/v11/ws/</span></span></code></pre></div><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/1.491187r19a.png" alt="1"></p><p>​ 显示一个bot QQ 链接说明成功！</p><h2 id="_6-配置ffmpeg" tabindex="-1">6.配置ffmpeg <a class="header-anchor" href="#_6-配置ffmpeg" aria-label="Permalink to &quot;6.配置ffmpeg&quot;">​</a></h2><p>​ <a href="https://ffmpeg.org/" target="_blank" rel="noreferrer">FFmpeg官网</a>,这里也准备了一个给那些找不到下载地方的宝贝。<a href="https://syykln.lanzoul.com/ieVuJ1rx5fsf" target="_blank" rel="noreferrer">ffmpeg5.0.1</a></p><p>​ 下载完成之后解压。选择你刚刚解压出来文件夹里面bin文件夹里面的ffmpeg.exe</p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.1vyer0hlai.png" alt="image"></p><p><img src="https://jsd.cdn.zzko.cn/gh/bilili-syy/picx-images-hosting@master/20240319/image.3d4jsro42i.png" alt="image"></p><h2 id="到此完成-鼓掌祝贺" tabindex="-1">到此完成！鼓掌祝贺 <a class="header-anchor" href="#到此完成-鼓掌祝贺" aria-label="Permalink to &quot;到此完成！鼓掌祝贺&quot;">​</a></h2>`,56),p=[n];function h(l,o,r,g,d,k){return a(),i("div",null,p)}const y=s(e,[["render",h]]);export{b as __pageData,y as default};
